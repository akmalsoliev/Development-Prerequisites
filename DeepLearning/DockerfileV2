FROM python:latest

ARG userName="dlEnv"

RUN useradd -rm -d /home/$userName -s /bin/bash -g root -G sudo -u 1001 $userName
USER $userName
WORKDIR /home/$userName

# Creating setup and workdir directories:
RUN mkdir ./setup/ && mkdir ./workdir/

# Downloading requirements.txt from directly from Github. 
# If desired some modifications change this or input source via ENV
ENV req_source="https://raw.githubusercontent.com/akmalsoliev/requirements.txt/master/DeepLearning/deeplearning.txt"
RUN curl $req_source --output setup/requirements.txt

# Upgrading pip and installing requirements.txt
RUN export PATH="/root/.local/bin"
RUN python3 -m pip install --upgrade pip 
RUN python3 -m pip install -r setup/requirements.txt 


# Install Vim
RUN apt-get update && apt install vim -y 

# Setting up Work Directory
RUN cd ./workdir/
CMD jupyter notebook --allow-root

